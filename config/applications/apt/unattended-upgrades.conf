// Unattended upgrades configuration for production servers

Unattended-Upgrade::Allowed-Origins {
    "${distro_id}:${distro_codename}-security";
    "${distro_id}ESMApps:${distro_codename}-apps-security";
    "${distro_id}ESM:${distro_codename}-infra-security";
};

// Package blacklist - critical system components that should not auto-update
Unattended-Upgrade::Package-Blacklist {
    "linux-image-*";
    "linux-headers-*";
    "grub*";
    "openssh-server";
};

// Do not automatically reboot
Unattended-Upgrade::Automatic-Reboot "false";

// Send email notifications
Unattended-Upgrade::Mail "ADMIN_EMAIL_PLACEHOLDER";
Unattended-Upgrade::MailOnlyOnError "true";

// Remove unused automatically installed kernel-related packages
Unattended-Upgrade::Remove-Unused-Kernel-Packages "true";

// Remove unused dependencies
Unattended-Upgrade::Remove-Unused-Dependencies "true";

// Enable logging
Unattended-Upgrade::SyslogEnable "true";
Unattended-Upgrade::SyslogFacility "daemon";

// Minimal system load requirement before running
Unattended-Upgrade::OnlyOnACPower "false";

// Skip updates if system load is too high
Unattended-Upgrade::Skip-Updates-On-Metered-Connections "true";