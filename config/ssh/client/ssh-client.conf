# SSH Client Configuration with ControlMaster and Security
# ED25519 only, no compatibility mode

# Global defaults with ControlMaster
Host *
    # Connection multiplexing for performance
    ControlMaster auto
    ControlPath ~/.ssh/controlmasters/%r@%h:%p
    ControlPersist 10m
    
    # Security settings
    Protocol 2
    ForwardAgent no
    ForwardX11 no
    HashKnownHosts yes
    IdentitiesOnly yes
    VerifyHostKeyDNS ask
    
    # Modern cryptography - ED25519 only
    KexAlgorithms ${MODERN_KEXALGORITHMS}
    Ciphers ${MODERN_CIPHERS}
    MACs ${MODERN_MACS}
    HostKeyAlgorithms ${MODERN_HOSTKEY_ALGORITHMS}
    PubkeyAcceptedAlgorithms ${MODERN_PUBKEY_ALGORITHMS}
    
    # Connection settings
    ServerAliveInterval 60
    ServerAliveCountMax 3
    ConnectTimeout 30
    TCPKeepAlive yes
    
    # Compression for slow connections
    Compression yes
    
    # Key management - ED25519 only
    AddKeysToAgent yes
    IdentityFile ~/.ssh/id_ed25519

# Example configurations (minimal)

# Local server
Host local
    HostName 192.168.1.100
    User admin

# Production server through bastion
Host prod
    HostName prod.example.com
    User admin
    ProxyJump bastion

# Bastion host
Host bastion
    HostName bastion.example.com
    User admin
    ForwardAgent yes